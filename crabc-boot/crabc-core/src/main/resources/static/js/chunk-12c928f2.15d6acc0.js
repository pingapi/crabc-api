(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-12c928f2"],{3095:function(e,t,r){},ac2a:function(e,t,r){"use strict";r.r(t);r("d3b7"),r("ac1f");var a=r("e762"),i={data:function(){return{customActiveKey:"tab1",register:!1,loginBtn:!1,form:this.$form.createForm(this)}},created:function(){},beforeDestroy:function(){window.ssoCallback=void 0},methods:{handleTabClick:function(e){this.customActiveKey=e},registerBtn:function(e){this.register=e},checkEmail:function(e){return e.split(",").every((function(e){return/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(e)}))},handleSubmit:function(e){var t=this;e.preventDefault(),(0,this.form.validateFields)(["username","password"],{force:!0},(function(e,r){if(!e){t.loginBtn=!0;var i={username:r.username,password:a.a.encode(r.password)};t.$store.dispatch("Login",i).then((function(){t.loginBtn=!1;var e=t.$route.query.redirect||"/";t.$router.push({path:e})})).catch((function(){t.loginBtn=!1}))}}))},registerSubmit:function(e){var t=this;e.preventDefault(),(0,this.form.validateFields)(["username","nickname","email","password"],{force:!0},(function(e,r){if(!e){if(t.loginBtn=!0,!1===(r.email&&t.checkEmail(r.email)))return t.loginBtn=!1,void t.$message.warning("请输入合法的邮箱地址");if(r.password.length<=6)return t.loginBtn=!1,void t.$message.warning("密码长度必须大于6位");var i={username:r.username,nickname:r.nickname,email:r.email,password:a.a.encode(r.password)};t.$api.user.register(i).then((function(){t.loginBtn=!1,t.register=!1,t.$router.push({path:"/"})})).catch((function(){t.loginBtn=!1}))}}))}}},n=(r("b66a"),r("2877")),s=Object(n.a)(i,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main"},[r("div",{attrs:{activeKey:e.customActiveKey,tabBarStyle:{textAlign:"center"}},on:{change:e.handleTabClick}},[r("div",{key:"tab2",attrs:{tab:e.$t("login.tab2Title")}},[r("a-form",{ref:"formLogin",staticClass:"user-layout-login",attrs:{id:"formLogin",hidden:e.register,form:e.form},on:{submit:e.handleSubmit}},[r("a-form-item",[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username",{rules:[{required:!0,message:e.$t("login.placeholderName")}],validateTrigger:"change"}],expression:"[\n              'username',\n              {\n                rules: [{ required: true, message: $t('login.placeholderName') }],\n                validateTrigger: 'change'\n              }\n            ]"}],staticClass:"input-username",attrs:{size:"large",type:"text",placeholder:e.$t("login.placeholderName"),allowClear:""}},[r("a-icon",{attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),r("a-form-item",[r("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:e.$t("login.placeholderPwd")}],validateTrigger:"blur"}],expression:"[\n              'password',\n              { rules: [{ required: true, message: $t('login.placeholderPwd') }], validateTrigger: 'blur' }\n            ]"}],staticClass:"input-username",attrs:{size:"large",placeholder:e.$t("login.placeholderPwd")}},[r("a-icon",{attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),r("a-form-item",{staticStyle:{"margin-top":"40px","margin-bottom":"0"}},[r("a-button",{staticClass:"login-button",attrs:{size:"large",type:"primary",htmlType:"submit",loading:e.loginBtn,disabled:e.loginBtn}},[e._v(" "+e._s(e.$t("login.loginBtn"))+" ")])],1)],1),r("a-form",{ref:"formRegister",staticClass:"user-layout-login",attrs:{id:"formRegister",hidden:!e.register,form:e.form},on:{submit:e.registerSubmit}},[r("a-form-item",[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username",{rules:[{required:!0,message:"请输入登录账号"}],validateTrigger:"change"}],expression:"[\n              'username',\n              {\n                rules: [{ required: true, message:'请输入登录账号'}],\n                validateTrigger: 'change'\n              }\n            ]"}],staticClass:"input-username",attrs:{size:"large",type:"text",placeholder:"请输入登录账号",allowClear:""}},[r("a-icon",{attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),r("a-form-item",[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["nickname",{rules:[{required:!0,message:"请输入账号名称"}],validateTrigger:"change"}],expression:"[\n              'nickname',\n              {\n                rules: [{ required: true, message:'请输入账号名称'}],\n                validateTrigger: 'change'\n              }\n            ]"}],staticClass:"input-username",attrs:{size:"large",type:"text",placeholder:"请输入账号名称",allowClear:""}},[r("a-icon",{attrs:{slot:"prefix",type:"idcard"},slot:"prefix"})],1)],1),r("a-form-item",[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["email",{rules:[{required:!0,message:"请输入邮箱地址"}],validateTrigger:"change"}],expression:"[\n              'email',\n              {\n                rules: [{ required: true, message:'请输入邮箱地址'}],\n                validateTrigger: 'change'\n              }\n            ]"}],staticClass:"input-username",attrs:{size:"large",type:"text",placeholder:"请输入邮箱地址",allowClear:""}},[r("a-icon",{attrs:{slot:"prefix",type:"mail"},slot:"prefix"})],1)],1),r("a-form-item",[r("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:e.$t("login.placeholderPwd")}],validateTrigger:"blur"}],expression:"[\n              'password',\n              { rules: [{ required: true, message: $t('login.placeholderPwd') }], validateTrigger: 'blur' }\n            ]"}],staticClass:"input-username",attrs:{size:"large",placeholder:e.$t("login.placeholderPwd")}},[r("a-icon",{attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),r("a-form-item",{staticStyle:{"margin-top":"40px","margin-bottom":"0"}},[r("a-button",{staticClass:"login-button",attrs:{size:"large",type:"primary",htmlType:"submit",loading:e.loginBtn,disabled:e.loginBtn}},[e._v(" "+e._s(e.$t("login.registerBtn"))+" ")]),r("a",{staticStyle:{float:"right"},on:{click:function(t){return e.registerBtn(!1)}}},[e._v("立即登录")])],1)],1)],1)])])}),[],!1,null,"34e4b5fe",null);t.default=s.exports},b66a:function(e,t,r){"use strict";r("3095")}}]);