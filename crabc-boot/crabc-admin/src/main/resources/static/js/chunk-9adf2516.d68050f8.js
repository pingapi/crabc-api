(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-9adf2516"],{"0347":function(t,e,i){"use strict";i.r(e);i("ac1f"),i("5319"),i("cd17");var a=i("ed3b"),n=(i("99af"),i("f3e4")),o={data:function(){return{headers:{Authorization:Object(n.a)()},myApi:{},enterColumns:[{title:"接口编号",dataIndex:"apiId",key:"apiId",width:90},{title:"接口名称",dataIndex:"apiName",key:"apiName",scopedSlots:{customRender:"apiName"},width:140},{title:"请求方式",dataIndex:"apiMethod",key:"apiMethod",width:90},{title:"接口地址",dataIndex:"apiPath",key:"apiPath",customRender:function(t){return"/api/web/"+t},scopedSlots:{customRender:"apiPath"}},{title:"认证类型",dataIndex:"authType",key:"authType",width:95,customRender:function(t){return"app_code"==t?"Code认证":"签名认证"},scopedSlots:{customRender:"authType"}},{title:"数据源",dataIndex:"datasourceName",key:"datasourceName",width:100,scopedSlots:{customRender:"datasourceName"}},{title:"版本",dataIndex:"version",key:"Vversion",width:100,scopedSlots:{customRender:"version"}},{title:"编辑时间",dataIndex:"updateTime",key:"updateTime",width:180},{title:"操作",dataIndex:"op",width:120,scopedSlots:{customRender:"op"}}],form:{keyword:"",devType:"edit",pageNum:1,pageSize:8},ishow:!1,pageSizeOptions:["10","20","30","40","50"]}},filters:{isPublishFilter:function(t){return"Y"==t?"已发布":"N"==t?"已下线":"未发布"},isOpenFilter:function(t){return"Y"==t?"已开放":"N"==t?"未开放":"-"}},created:function(){this.getMyRightsList()},methods:{getMyRightsList:function(){var t=this;this.$api.account.myDevApi(this.form).then((function(e){if(0===e.code){var i=e.data||{};t.myApi=i,t.ishow=!0}}))},onDetail:function(t){var e="".concat(window.location.origin,"/api-details?objId=").concat(t.apiId,"&objType=API");window.open(e,"_blank")},gotoEdit:function(t){this.$router.push({path:"/data-service",query:{apiId:t}})},downloadFile:function(t){this.$api.develop.apiDownload("接口列表.xlsx","edit",t).then((function(t){}))},importData:function(t){"done"===t.file.status?this.$message.success("导入成功"):"error"===t.file.status&&this.$message.error("导入失败")},deleteBtn:function(t){var e=this;a.a.confirm({title:this.$t("删除"),content:this.$t("确定删除当前接口吗?"),onOk:function(){e.deleteApi(t)},onCancel:function(){}})},deleteApi:function(t){var e=this;this.$api.develop.deleteService(t).then((function(t){0===t.code&&e.getMyRightsList()}))},onKeywordChanged:function(){""===this.form.keyword&&(this.form.pageNum=1,this.getMyRightsList())},onChange:function(t){this.form.pageNum=t,this.getMyRightsList()},onShowSizeChange:function(t,e){this.form.pageNum=1,this.form.pageSize=e,this.getMyRightsList()},onSearch:function(){this.form.pageNum=1,this.getMyRightsList()}}},s=(i("e0d5"),i("2877")),r=Object(s.a)(o,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page-message-center"},[i("div",{staticClass:"page-message-select"},[i("a-row",{attrs:{type:"flex",justify:"end",gutter:16}},[i("div",{staticClass:"search-name",staticStyle:{margin:"0 30px"}},[i("span",[t._v("关键字：")]),i("a-input",{staticStyle:{width:"300px"},attrs:{"allow-clear":"",placeholder:"请输入接口名称或接口地址"},on:{change:t.onKeywordChanged},model:{value:t.form.keyword,callback:function(e){t.$set(t.form,"keyword",e)},expression:"form.keyword"}})],1),i("a-button",{attrs:{type:"primary"},on:{click:t.onSearch}},[t._v("查询")]),i("a-button",{staticStyle:{"margin-left":"5px"},attrs:{icon:"download"},on:{click:function(e){return t.downloadFile(t.form.keyword)}}},[t._v("导出")]),i("a-upload",{attrs:{name:"file",accept:".xlsx",showUploadList:!1,headers:t.headers,action:"/api/box/sys/api/info/import?type=dev"},on:{change:t.importData}},[i("a-button",{staticStyle:{margin:"0 5px"},attrs:{icon:"upload"}},[t._v("上传")])],1)],1)],1),i("div",{staticClass:"page-measage-table"},[i("a-table",{attrs:{columns:t.enterColumns,"data-source":t.myApi.list||[],pagination:!1,rowKey:function(t,e){return e},scroll:{x:900}},scopedSlots:t._u([{key:"apiName",fn:function(e,a){return[i("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.onDetail(a)}}},[t._v(t._s(e))])]}},{key:"isPublish",fn:function(e){return i("span",{style:{color:"Y"===e?"":"N"===e?"red":"orange"}},[t._v(" "+t._s(t._f("isPublishFilter")(e))+" ")])}},{key:"isOpen",fn:function(e){return i("span",{},[t._v(" "+t._s(t._f("isOpenFilter")(e))+" ")])}},{key:"op",fn:function(e,a){return i("span",{},[i("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.gotoEdit(a.apiId)}}},[t._v("编辑")]),i("a-button",{staticStyle:{"margin-left":"10px",padding:"0"},attrs:{type:"link"},on:{click:function(e){return t.deleteBtn(a.apiId)}}},[t._v("删除")])],1)}}])}),t.ishow?i("a-pagination",{staticStyle:{float:"right","margin-top":"20px"},attrs:{size:"small","show-quick-jumper":"","show-size-changer":"",pageSizeOptions:["10","20","50","100"],total:t.myApi.total,"page-size":t.form.pageSize,"show-total":function(t){return"共 "+t+"条"}},on:{showSizeChange:t.onShowSizeChange,change:t.onChange},model:{value:t.form.pageNum,callback:function(e){t.$set(t.form,"pageNum",e)},expression:"form.pageNum"}}):t._e()],1)])}),[],!1,null,"a59c4086",null).exports,c={data:function(){return{headers:{Authorization:Object(n.a)()},myApi:{},enterColumns:[{title:"接口编号",dataIndex:"apiId",key:"apiId",width:90},{title:"接口名称",dataIndex:"apiName",key:"apiName",width:150,scopedSlots:{customRender:"apiName"}},{title:"请求方式",dataIndex:"apiMethod",key:"apiMethod",width:90},{title:"接口地址",dataIndex:"apiPath",key:"apiPath",customRender:function(t){return"/api/web/"+t}},{title:"认证类型",dataIndex:"authType",key:"authType",width:95,customRender:function(t){return"app_code"==t?"Code认证":"none"==t?"无认证":"签名认证"},scopedSlots:{customRender:"authType"}},{title:"数据源",dataIndex:"datasourceName",key:"datasourceName",width:120,scopedSlots:{customRender:"datasourceName"}},{title:"版本",dataIndex:"version",key:"version",width:70,scopedSlots:{customRender:"version"}},{title:"发布时间",dataIndex:"releaseTime",key:"releaseTime",width:180},{title:"操作",dataIndex:"op",width:120,scopedSlots:{customRender:"op"}}],form:{keyword:"",devType:"release",pageNum:1,pageSize:8},ishow:!1,pageSizeOptions:["10","20","30","40","50"]}},filters:{visibilityFilter:function(t){return"PRIVATE"==t?"私有":"READONLY"==t?"同分组可见":"READWRITE"==t?"同分组可改":"未知"},isPublishFilter:function(t){return"Y"==t?"已发布":"N"==t?"已下线":"未发布"},isOpenFilter:function(t){return"Y"==t?"已开放":"N"==t?"未开放":"-"}},created:function(){this.getMyRightsList()},methods:{userFilterOption:function(t,e){return e.componentOptions.children[0].text.toLowerCase().indexOf(t.toLowerCase())>=0},getMyRightsList:function(){var t=this;this.$api.account.myDevApi(this.form).then((function(e){if(0===e.code){var i=e.data||{};t.myApi=i,t.ishow=!0}}))},openBtn:function(t,e){var i=this;1==e?a.a.confirm({title:this.$t("下线"),content:this.$t("确定要下线当前接口吗?"),onOk:function(){i.updateState(t,0)},onCancel:function(){}}):a.a.confirm({title:this.$t("上线"),content:this.$t("确定要上线当前接口吗?"),onOk:function(){i.updateState(t,1)},onCancel:function(){}})},updateState:function(t,e){var i=this;this.$api.account.updateApiState({apiId:t,enabled:e}).then((function(t){t.data&&i.$message.success("操作成功!"),i.getMyRightsList()}))},onDetail:function(t){var e="".concat(window.location.origin,"/api-details?objId=").concat(t.apiId,"&objType=API");window.open(e,"_blank")},gotoEdit:function(t){this.$router.push({path:"/data-service",query:{apiId:t}})},downloadFile:function(t){this.$api.develop.apiDownload("接口列表.xlsx","release",t).then((function(t){}))},importData:function(t){"done"===t.file.status?this.$message.success("导入成功"):"error"===t.file.status&&this.$message.error("导入失败")},onKeywordChanged:function(){""===this.form.keyword&&(this.form.pageNum=1,this.getMyRightsList())},onChange:function(t){this.form.pageNum=t,this.getMyRightsList()},onShowSizeChange:function(t,e){this.form.pageNum=1,this.form.pageSize=e,this.getMyRightsList()},onSearch:function(){this.form.pageCurrent=1,this.getMyRightsList()}}},d=(i("09d6"),{components:{MyApiForEdit:r,MyApiForRelease:Object(s.a)(c,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page-message-center"},[i("div",{staticClass:"page-message-select"},[i("a-row",{attrs:{type:"flex",justify:"end",gutter:16}},[i("div",{staticClass:"search-name",staticStyle:{margin:"0 30px"}},[i("span",[t._v("关键字：")]),i("a-input",{staticStyle:{width:"300px"},attrs:{"allow-clear":"",placeholder:"请输入接口名称或接口地址"},on:{change:t.onKeywordChanged},model:{value:t.form.keyword,callback:function(e){t.$set(t.form,"keyword",e)},expression:"form.keyword"}})],1),i("a-button",{attrs:{type:"primary"},on:{click:t.onSearch}},[t._v("查询")]),i("a-button",{staticStyle:{"margin-left":"5px"},attrs:{icon:"download"},on:{click:function(e){return t.downloadFile(t.form.keyword)}}},[t._v("导出")]),i("a-upload",{attrs:{name:"file",accept:".xlsx",showUploadList:!1,headers:t.headers,action:"/api/box/sys/api/info/import?type=release"},on:{change:t.importData}},[i("a-button",{staticStyle:{margin:"0 5px"},attrs:{icon:"upload"}},[t._v("上传")])],1)],1)],1),i("div",{staticClass:"page-measage-table"},[i("a-table",{attrs:{columns:t.enterColumns,"data-source":t.myApi.list||[],pagination:!1,rowKey:function(t,e){return e},scroll:{x:900}},scopedSlots:t._u([{key:"apiName",fn:function(e,a){return[i("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.onDetail(a)}}},[t._v(t._s(e))])]}},{key:"visibility",fn:function(e){return i("span",{},[t._v(" "+t._s(t._f("visibilityFilter")(e))+" ")])}},{key:"isPublish",fn:function(e){return i("span",{style:{color:"Y"===e?"":"N"===e?"red":"orange"}},[t._v(" "+t._s(t._f("isPublishFilter")(e))+" ")])}},{key:"isOpen",fn:function(e){return i("span",{},[t._v(" "+t._s(t._f("isOpenFilter")(e))+" ")])}},{key:"enabled",fn:function(e,a){return[i("span",{class:1==a.enabled?"":"redSpan"},[t._v(" "+t._s(1==a.enabled?"上线":"下线")+" ")])]}},{key:"op",fn:function(e,a){return i("span",{},[i("a",{attrs:{href:"javascript:void(0)",disabled:1==a.enabled},on:{click:function(e){return t.gotoEdit(a.apiId)}}},[t._v("编辑")]),i("a-button",{class:0==a.enabled?"":"redSpan",staticStyle:{"margin-left":"10px",padding:"0"},attrs:{type:"link"},on:{click:function(e){return t.openBtn(a.apiId,a.enabled)}}},[t._v(" "+t._s(0==a.enabled?"上线":"下线")+" ")])],1)}}])}),t.ishow?i("a-pagination",{staticStyle:{float:"right","margin-top":"20px"},attrs:{size:"small","show-quick-jumper":"","show-size-changer":"",pageSizeOptions:["10","20","50","100"],total:t.myApi.total,"page-size":t.form.pageSize,"show-total":function(t){return"共 "+t+"条"}},on:{showSizeChange:t.onShowSizeChange,change:t.onChange},model:{value:t.form.pageNum,callback:function(e){t.$set(t.form,"pageNum",e)},expression:"form.pageNum"}}):t._e()],1)])}),[],!1,null,"b1b7470c",null).exports},data:function(){return{curTab:"myPublicApi"}},created:function(){this.$route.query.type&&(this.curTab="")},methods:{onTabChanged:function(){this.$router.replace({name:"MyApi",query:{type:this.curTab}})}}}),u=(i("819b"),Object(s.a)(d,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"switcher"},[i("a-radio-group",{on:{change:t.onTabChanged},model:{value:t.curTab,callback:function(e){t.curTab=e},expression:"curTab"}},[i("a-radio-button",{attrs:{value:"myDevApi"}},[t._v(" 开发中 ")]),i("a-radio-button",{attrs:{value:"myPublicApi"}},[t._v(" 已发布 ")])],1)],1),"myDevApi"==t.curTab?i("MyApiForEdit"):t._e(),"myPublicApi"==t.curTab?i("MyApiForRelease"):t._e()],1)}),[],!1,null,"a8c5eb3c",null));e.default=u.exports},"09d6":function(t,e,i){"use strict";i("861d6")},"819b":function(t,e,i){"use strict";i("eb2f")},"861d6":function(t,e,i){},d3d2:function(t,e,i){},e0d5:function(t,e,i){"use strict";i("d3d2")},eb2f:function(t,e,i){}}]);